<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRAKD — Find Every ID</title>
  <meta name="description" content="Discover DJ sets, ID every track, and sync to Spotify. Join the waitlist for early access.">
  <meta property="og:title" content="TRAKD — Find Every ID">
  <meta property="og:description" content="Discover DJ sets, ID every track, and sync to Spotify. Join the waitlist.">
  <meta property="og:image" content="/icon.png">
  <meta name="theme-color" content="#1A1A1A">
  <link rel="icon" href="/icon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: #1A1A1A;
      color: #F5F0E8;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Hero with map background */
    .hero {
      position: relative;
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
    }

    .hero-map-bg {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.6;
      pointer-events: none;
    }

    .hero-map-bg svg {
      width: 160%;
      max-width: none;
      height: auto;
    }

    .hero-content {
      position: relative;
      z-index: 2;
      max-width: 400px;
      width: 100%;
      padding: 60px 24px;
    }

    .hero h1 {
      font-size: 52px;
      font-weight: 800;
      letter-spacing: 8px;
      margin-bottom: 12px;
    }

    .hero .tagline {
      font-size: 18px;
      color: rgba(245, 240, 232, 0.8);
      margin-bottom: 32px;
      line-height: 1.5;
    }

    .hero .map-label {
      position: absolute;
      bottom: 20px;
      left: 24px;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: rgba(196, 30, 58, 0.6);
      z-index: 3;
    }

    /* Form */
    .signup-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .signup-form input[type="text"],
    .signup-form input[type="email"] {
      width: 100%;
      padding: 14px 18px;
      border-radius: 12px;
      border: 1.5px solid rgba(245, 240, 232, 0.15);
      background: rgba(26, 26, 26, 0.85);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      color: #F5F0E8;
      font-size: 16px;
      font-family: 'Inter', sans-serif;
      outline: none;
      transition: border-color 0.2s;
    }

    .signup-form input[type="text"]::placeholder,
    .signup-form input[type="email"]::placeholder {
      color: rgba(245, 240, 232, 0.4);
    }

    .signup-form input[type="text"]:focus,
    .signup-form input[type="email"]:focus {
      border-color: #C41E3A;
    }

    .signup-form button {
      width: 100%;
      padding: 14px 18px;
      border-radius: 12px;
      border: none;
      background: #C41E3A;
      color: #F5F0E8;
      font-size: 16px;
      font-weight: 600;
      font-family: 'Inter', sans-serif;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .signup-form button:hover {
      background: #a8182f;
    }

    .signup-form button:active {
      transform: scale(0.98);
    }

    .signup-form button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .form-message {
      text-align: center;
      font-size: 14px;
      min-height: 20px;
    }

    .form-message.success { color: #4ade80; }
    .form-message.error { color: #f87171; }

    /* Success state */
    .success-state {
      display: none;
      text-align: center;
      padding: 20px 0;
    }

    .success-state .checkmark {
      font-size: 40px;
      margin-bottom: 12px;
    }

    .success-state h3 {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .success-state p {
      color: rgba(245, 240, 232, 0.6);
      font-size: 15px;
    }

    /* Features */
    .features {
      padding: 48px 0;
    }

    .feature-card {
      background: rgba(245, 240, 232, 0.04);
      border: 1px solid rgba(245, 240, 232, 0.08);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 12px;
    }

    .feature-card .icon {
      font-size: 28px;
      margin-bottom: 12px;
    }

    .feature-card h3 {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .feature-card p {
      font-size: 14px;
      color: rgba(245, 240, 232, 0.6);
      line-height: 1.5;
    }

    /* Counter */
    .counter-section {
      text-align: center;
      padding: 32px 0;
    }

    .counter-section .count {
      font-size: 36px;
      font-weight: 800;
      color: #C41E3A;
    }

    .counter-section .label {
      font-size: 15px;
      color: rgba(245, 240, 232, 0.6);
      margin-top: 4px;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 32px 0 48px;
      border-top: 1px solid rgba(245, 240, 232, 0.08);
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin-bottom: 20px;
    }

    .social-links a {
      color: rgba(245, 240, 232, 0.6);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
      transition: color 0.2s;
    }

    .social-links a:hover {
      color: #F5F0E8;
    }

    footer .coming-soon {
      font-size: 13px;
      color: rgba(245, 240, 232, 0.35);
    }
  </style>
</head>
<body>

  <!-- Hero with map background -->
  <section class="hero">
    <div class="hero-map-bg">
      <svg viewBox="0 0 1000 500" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="glow">
            <feGaussianBlur stdDeviation="8" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
          <filter id="glow-big">
            <feGaussianBlur stdDeviation="14" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>

        <!-- Large ambient glow for hotspots -->
        <g filter="url(#glow-big)">
          <circle cx="504" cy="142" r="18" fill="#C41E3A" opacity="0.25"/><!-- Europe/Ibiza region -->
          <circle cx="500" cy="107" r="16" fill="#C41E3A" opacity="0.2"/><!-- UK region -->
          <circle cx="294" cy="137" r="14" fill="#C41E3A" opacity="0.18"/><!-- US East -->
          <circle cx="177" cy="150" r="12" fill="#C41E3A" opacity="0.15"/><!-- US West -->
        </g>

        <!-- Venue heatmap dots -->
        <g filter="url(#glow)">
          <!-- IBIZA cluster -->
          <circle cx="504" cy="142" r="7" fill="#C41E3A" opacity="0.9"/>
          <circle cx="501" cy="144" r="5.5" fill="#C41E3A" opacity="0.7"/>
          <circle cx="507" cy="143" r="5.5" fill="#C41E3A" opacity="0.7"/>
          <circle cx="503" cy="139" r="4.5" fill="#C41E3A" opacity="0.6"/>
          <circle cx="506" cy="146" r="4.5" fill="#C41E3A" opacity="0.6"/>
          <!-- LONDON cluster -->
          <circle cx="500" cy="107" r="6.5" fill="#C41E3A" opacity="0.85"/>
          <circle cx="497" cy="108" r="5" fill="#C41E3A" opacity="0.7"/>
          <circle cx="503" cy="106" r="4.5" fill="#C41E3A" opacity="0.6"/>
          <circle cx="499" cy="110" r="4" fill="#C41E3A" opacity="0.5"/>
          <!-- BERLIN cluster -->
          <circle cx="537" cy="104" r="6" fill="#C41E3A" opacity="0.85"/>
          <circle cx="535" cy="106" r="4.5" fill="#C41E3A" opacity="0.6"/>
          <circle cx="539" cy="102" r="4.5" fill="#C41E3A" opacity="0.6"/>
          <!-- AMSTERDAM cluster -->
          <circle cx="514" cy="104" r="5" fill="#C41E3A" opacity="0.8"/>
          <circle cx="511" cy="106" r="4" fill="#C41E3A" opacity="0.6"/>
          <!-- NYC cluster -->
          <circle cx="294" cy="137" r="6.5" fill="#C41E3A" opacity="0.85"/>
          <circle cx="292" cy="139" r="5" fill="#C41E3A" opacity="0.65"/>
          <circle cx="297" cy="135" r="4" fill="#C41E3A" opacity="0.5"/>
          <!-- TOMORROWLAND -->
          <circle cx="512" cy="108" r="4" fill="#C41E3A" opacity="0.7"/>
          <!-- PARIS -->
          <circle cx="507" cy="114" r="3.5" fill="#C41E3A" opacity="0.7"/>
          <!-- BARCELONA -->
          <circle cx="506" cy="135" r="4.5" fill="#C41E3A" opacity="0.75"/>
          <!-- MANCHESTER -->
          <circle cx="494" cy="101" r="3.5" fill="#C41E3A" opacity="0.65"/>
          <!-- BRISTOL -->
          <circle cx="493" cy="107" r="3.5" fill="#C41E3A" opacity="0.6"/>
          <!-- EDINBURGH -->
          <circle cx="491" cy="95" r="3" fill="#C41E3A" opacity="0.55"/>
          <!-- BELFAST -->
          <circle cx="484" cy="98" r="3" fill="#C41E3A" opacity="0.55"/>
          <!-- DUBLIN -->
          <circle cx="483" cy="102" r="3" fill="#C41E3A" opacity="0.55"/>
          <!-- MAMAIA Romania -->
          <circle cx="580" cy="127" r="3.5" fill="#C41E3A" opacity="0.65"/>
          <!-- COACHELLA / LA -->
          <circle cx="177" cy="157" r="5" fill="#C41E3A" opacity="0.75"/>
          <circle cx="171" cy="155" r="4" fill="#C41E3A" opacity="0.6"/>
          <!-- LAS VEGAS -->
          <circle cx="181" cy="149" r="4.5" fill="#C41E3A" opacity="0.7"/>
          <!-- RED ROCKS -->
          <circle cx="208" cy="140" r="3.5" fill="#C41E3A" opacity="0.6"/>
          <!-- BURNING MAN -->
          <circle cx="169" cy="137" r="3" fill="#C41E3A" opacity="0.55"/>
          <!-- TULUM -->
          <circle cx="257" cy="194" r="4.5" fill="#C41E3A" opacity="0.7"/>
          <circle cx="259" cy="192" r="3.5" fill="#C41E3A" opacity="0.55"/>
          <!-- SAO PAULO -->
          <circle cx="371" cy="315" r="3.5" fill="#C41E3A" opacity="0.6"/>
          <!-- GLASTONBURY -->
          <circle cx="493" cy="108" r="3" fill="#C41E3A" opacity="0.5"/>
        </g>

        <!-- Bright pin dots -->
        <g>
          <circle cx="504" cy="142" r="2" fill="#F5F0E8" opacity="0.9"/>
          <circle cx="500" cy="107" r="2" fill="#F5F0E8" opacity="0.9"/>
          <circle cx="537" cy="104" r="2" fill="#F5F0E8" opacity="0.9"/>
          <circle cx="514" cy="104" r="2" fill="#F5F0E8" opacity="0.85"/>
          <circle cx="294" cy="137" r="2" fill="#F5F0E8" opacity="0.9"/>
          <circle cx="512" cy="108" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="507" cy="114" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="506" cy="135" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="494" cy="101" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="580" cy="127" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="177" cy="157" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="181" cy="149" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="208" cy="140" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="257" cy="194" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="371" cy="315" r="1.5" fill="#F5F0E8" opacity="0.8"/>
          <circle cx="169" cy="137" r="1.5" fill="#F5F0E8" opacity="0.7"/>
          <circle cx="484" cy="98" r="1.5" fill="#F5F0E8" opacity="0.7"/>
          <circle cx="483" cy="102" r="1.5" fill="#F5F0E8" opacity="0.7"/>
          <circle cx="491" cy="95" r="1.5" fill="#F5F0E8" opacity="0.7"/>
        </g>
      </svg>
    </div>

    <p class="map-label">Sets TRAKD Worldwide</p>

    <div class="hero-content">
      <h1>TRAKD</h1>
      <p class="tagline">Find every ID.<br>From the set to your playlist.</p>

      <form class="signup-form" id="waitlistForm">
        <input type="text" id="nameInput" placeholder="Your name" required autocomplete="name">
        <input type="text" id="cityInput" placeholder="Your city" required autocomplete="address-level2">
        <input type="email" id="emailInput" placeholder="Your email" required autocomplete="email" inputmode="email">
        <button type="submit" id="submitBtn">Join the Waitlist</button>
        <p class="form-message" id="formMessage"></p>
      </form>

      <div class="success-state" id="successState">
        <div class="checkmark">&#10003;</div>
        <h3>You're in!</h3>
        <p>We'll let you know when TRAKD launches.</p>
      </div>
    </div>
  </section>

  <div class="container">

    <!-- Features -->
    <section class="features">
      <div class="feature-card">
        <div class="icon">&#127911;</div>
        <h3>Discover Sets</h3>
        <p>Browse tracklists from your favorite DJs and festivals. Every set, broken down track by track.</p>
      </div>
      <div class="feature-card">
        <div class="icon">&#128269;</div>
        <h3>ID Every Track</h3>
        <p>No more Shazam fails. Get verified track IDs with artist, label, and BPM info.</p>
      </div>
      <div class="feature-card">
        <div class="icon">&#127925;</div>
        <h3>Sync to Spotify</h3>
        <p>One tap to save tracks straight to your Spotify library. Verified links, no guesswork.</p>
      </div>
    </section>

    <!-- Waitlist Counter -->
    <section class="counter-section" id="counterSection" style="display:none;">
      <div class="count" id="waitlistCount">0</div>
      <div class="label">people on the waitlist</div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="social-links">
        <a href="https://tiktok.com/@trakdapp" target="_blank" rel="noopener">TikTok</a>
        <a href="https://instagram.com/trakdapp" target="_blank" rel="noopener">Instagram</a>
      </div>
      <p class="coming-soon">Coming Soon to iOS &amp; Android</p>
    </footer>

  </div>

  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const source = params.get('ref') || 'direct';

      const form = document.getElementById('waitlistForm');
      const nameInput = document.getElementById('nameInput');
      const cityInput = document.getElementById('cityInput');
      const emailInput = document.getElementById('emailInput');
      const submitBtn = document.getElementById('submitBtn');
      const formMessage = document.getElementById('formMessage');
      const successState = document.getElementById('successState');
      const counterSection = document.getElementById('counterSection');
      const waitlistCount = document.getElementById('waitlistCount');

      fetch('/api/waitlist')
        .then(r => r.json())
        .then(data => {
          if (data.count > 0) {
            waitlistCount.textContent = data.count.toLocaleString();
            counterSection.style.display = 'block';
          }
        })
        .catch(() => {});

      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        const name = nameInput.value.trim();
        const city = cityInput.value.trim();
        const email = emailInput.value.trim();

        if (!email || !name || !city) return;

        submitBtn.disabled = true;
        submitBtn.textContent = 'Joining...';
        formMessage.textContent = '';
        formMessage.className = 'form-message';

        try {
          const res = await fetch('/api/waitlist', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, name, city, source })
          });

          const data = await res.json();

          if (res.ok && data.success) {
            form.style.display = 'none';
            successState.style.display = 'block';

            const currentCount = parseInt(waitlistCount.textContent.replace(/,/g, '')) || 0;
            waitlistCount.textContent = (currentCount + 1).toLocaleString();
            counterSection.style.display = 'block';
          } else {
            formMessage.textContent = data.error || 'Something went wrong. Try again.';
            formMessage.className = 'form-message error';
            submitBtn.disabled = false;
            submitBtn.textContent = 'Join the Waitlist';
          }
        } catch (err) {
          formMessage.textContent = 'Connection error. Try again.';
          formMessage.className = 'form-message error';
          submitBtn.disabled = false;
          submitBtn.textContent = 'Join the Waitlist';
        }
      });
    })();
  </script>
</body>
</html>
